âœ… ä½ çš„ç›®æ ‡ç¯å¢ƒï¼šè½»é‡åŒ– CLIP

ä½ éœ€è¦çš„ä¾èµ–é€šå¸¸åªæœ‰ï¼š

torchï¼ˆå¯é€‰ CPU ç‰ˆï¼‰

clip æˆ– open_clip

åŸºç¡€å·¥å…·ï¼ˆnumpyã€Pillowï¼‰

ä¸€ä¸ªå®Œæ•´ç¯å¢ƒ < 2GB å°±å¤Ÿäº†ã€‚

æ‰€ä»¥æˆ‘ä»¬è¦æ¸…ç†æ‰ï¼š

âœ” æ‰€æœ‰ conda cache
âœ” pip cache
âœ” ä¸å†ä½¿ç”¨çš„ conda å‘è¡Œç‰ˆï¼ˆminiforgeã€miniconda çš„é‡å¤å®‰è£…ï¼‰
âœ” Eval3D çš„å·¨å¤§ç¯å¢ƒï¼ˆ36GBï¼‰ â† æœ€å ç©ºé—´
âœ” .local/lib å¤šä½™ python åŒ…ï¼ˆå¸¸è§å†—ä½™ï¼‰

ğŸš€ ä¸€æ¬¡æ€§æ¸…ç†é‡å¤çš„åŒ…ï¼ˆå®‰å…¨ã€æ¨èï¼‰

æˆ‘æä¾›ç»™ä½ å¯ç›´æ¥é€æ¡å¤åˆ¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶è§£é‡Šå®‰å…¨æ€§ã€‚

ğŸ”¥ ç¬¬ 1 æ­¥ï¼šå½»åº•æ¸…ç† Conda ç¼“å­˜ï¼ˆçº¦ 60GB å¯é‡Šæ”¾ï¼‰

è¿™ ç»å¯¹å®‰å…¨ï¼Œä¸ä¼šå½±å“å·²å®‰è£…çš„ç¯å¢ƒã€‚

conda clean -a -y
rm -rf ~/.conda/pkgs
rm -rf ~/miniconda3/pkgs
rm -rf ~/miniforge3/pkgs

ğŸ”¥ ç¬¬ 2 æ­¥ï¼šåˆ é™¤ pip ç¼“å­˜ï¼ˆ35GBï¼‰â€”â€”100%å®‰å…¨
rm -rf ~/.cache/pip

ğŸ”¥ ç¬¬ 3 æ­¥ï¼šåˆ é™¤ Eval3D ç¯å¢ƒï¼ˆ36GBï¼‰

ä½ è¯´ç°åœ¨ä¸å‡†å¤‡è·‘ Eval3D â†’ å¯ä»¥å®‰å…¨åˆ é™¤æ•´ä¸ªç¯å¢ƒã€‚

ä»ä½ çš„ç»“æ„çœ‹ Eval3D ç¯å¢ƒæ˜¯ï¼š

~/eval3d-py311/


åˆ é™¤ï¼š

rm -rf ~/eval3d-py311


è¿™ä¸€æ­¥ç«‹åˆ»é‡Šæ”¾ 36GBã€‚

ğŸ”¥ ç¬¬ 4 æ­¥ï¼šä½ æœ‰å¤šä¸ª Conda å®‰è£…ï¼ˆé‡å¤å ç”¨ 70GB+ï¼‰

ä½ ç°åœ¨æœ‰ï¼š

miniconda3/

miniforge3/

.conda/

æˆ‘ä»¬è®©ç³»ç»Ÿä¿æŒ ä¸€ä¸ªæœ€å¹²å‡€ã€æœ€è½»çš„ condaã€‚
å¦‚æœä½ ç°åœ¨åªæƒ³è·‘è½»é‡ CLIPï¼Œæˆ‘æ¨èä¿ç•™ miniconda3ï¼Œåˆ é™¤å…¶ä»–ä¸¤ä¸ªã€‚

åˆ é™¤ Miniforgeï¼ˆ4.5GBï¼‰
rm -rf ~/miniforge3

åˆ é™¤ .conda å…¨å±€ç¯å¢ƒï¼ˆ12GBï¼‰

åªè¦ä½ æ‰€æœ‰é¡¹ç›®ä¸ä¾èµ– .conda å°±èƒ½åˆ ã€‚

rm -rf ~/.conda

ğŸ”¥ ç¬¬ 5 æ­¥ï¼šæ¸…ç†é‡å¤çš„ user-local python åŒ…ï¼ˆ13GBï¼‰

.local/lib é‡Œé€šå¸¸æ˜¯ pip é‡å¤åŒ…ï¼Œå¾ˆå¤šå’Œ conda ç¯å¢ƒé‡å¤ã€‚

å¦‚æœä½ æœªæ¥æ‰“ç®—åªä½¿ç”¨ conda ç¯å¢ƒè·‘ CLIPï¼Œåˆ é™¤å®ƒæ˜¯å®‰å…¨çš„ï¼š

rm -rf ~/.local/lib/python*


æ³¨æ„ï¼š
å¦‚æœä½ ç”¨ pip install --user è£…è¿‡æŸäº›å·¥å…·ï¼ˆå¾ˆå°‘è§ï¼‰ï¼Œè¿™ä¼šæ¸…æ‰å®ƒä»¬ã€‚

ä½†ä»ä½ ç›®å½•å ç”¨é‡çœ‹ï¼Œé‡Œé¢ 90% æ˜¯é‡å¤åŒ…ï¼Œå¯ä»¥åˆ ã€‚

ğŸ”¥ ç¬¬ 6 æ­¥ï¼ˆå¯é€‰ï¼‰ï¼šæ¸…ç† Rust ç¼“å­˜ï¼ˆ4GBï¼‰

å¦‚æœä½ ä¸åš Rust å¼€å‘ï¼š

rm -rf ~/.cargo
rm -rf ~/.rustup

12.7 å†æ¬¡æ¸…ç†
du -h --max-depth=2 ~/. 2>/dev/null | sort -hr | head -30

26.1.19 æ¸…ç†
/home/hpc/iwfa/iwfa120h/miniforge3/bin/conda clean --all -y

rm -rf ~/.cache/pip

# ç¡®è®¤è¯¥ç¯å¢ƒæ˜¯å¦å·²å¼ƒç”¨ï¼Œå¦‚æœå¼ƒç”¨åˆ™åˆ é™¤ï¼š
rm -rf ~/eval3d-py311